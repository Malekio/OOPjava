{
  "info": {
    "_postman_id": "dz-tourguide-api-collection",
    "name": "üá©üáø DZ-TourGuide API - Complete Collection",
    "description": "Complete automated API collection for DZ-TourGuide platform with authentication, profiles, tours, bookings, reviews, and messaging. Includes automated testing and request chaining.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "item": [
    {
      "name": "ü©∫ Health & Metrics",
      "item": [
        {
          "name": "Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Health check returns 200 OK', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains status healthy', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.status).to.eql('healthy');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/health/",
              "host": ["{{base_url}}"],
              "path": ["v1", "health", ""]
            }
          }
        },
        {
          "name": "Platform Metrics",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Metrics returns 200 OK', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains metrics data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('total_users');",
                  "    pm.expect(response).to.have.property('total_guides');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/metrics/",
              "host": ["{{base_url}}"],
              "path": ["v1", "metrics", ""]
            }
          }
        }
      ]
    },
    {
      "name": "üîê Authentication Flow",
      "item": [
        {
          "name": "1Ô∏è‚É£ Register Tourist",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tourist registration successful', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains user data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('user');",
                  "    pm.expect(response.user).to.have.property('id');",
                  "    pm.environment.set('tourist_id', response.user.id);",
                  "    pm.environment.set('tourist_username', response.user.username);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"tourist_sara_{{$randomInt}}\",\n  \"email\": \"sara{{$randomInt}}@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"password_confirm\": \"SecurePass123!\",\n  \"first_name\": \"Sara\",\n  \"last_name\": \"Martin\",\n  \"phone_number\": \"+33123456789\",\n  \"user_type\": \"tourist\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/register/",
              "host": ["{{base_url}}"],
              "path": ["v1", "auth", "register", ""]
            }
          }
        },
        {
          "name": "2Ô∏è‚É£ Register Guide",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guide registration successful', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains user data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('user');",
                  "    pm.expect(response.user).to.have.property('id');",
                  "    pm.environment.set('guide_id', response.user.id);",
                  "    pm.environment.set('guide_username', response.user.username);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"guide_ahmed_{{$randomInt}}\",\n  \"email\": \"ahmed{{$randomInt}}@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"password_confirm\": \"SecurePass123!\",\n  \"first_name\": \"Ahmed\",\n  \"last_name\": \"Benali\",\n  \"phone_number\": \"+213555123456\",\n  \"user_type\": \"guide\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/register/",
              "host": ["{{base_url}}"],
              "path": ["v1", "auth", "register", ""]
            }
          }
        },
        {
          "name": "3Ô∏è‚É£ Login Tourist (Get Tokens)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tourist login successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains tokens', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('access');",
                  "    pm.expect(response).to.have.property('refresh');",
                  "    ",
                  "    // Save tourist tokens",
                  "    pm.environment.set('tourist_access_token', response.access);",
                  "    pm.environment.set('tourist_refresh_token', response.refresh);",
                  "    pm.environment.set('access_token', response.access);",
                  "    pm.environment.set('refresh_token', response.refresh);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{tourist_username}}\",\n  \"password\": \"SecurePass123!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/login/",
              "host": ["{{base_url}}"],
              "path": ["v1", "auth", "login", ""]
            }
          }
        },
        {
          "name": "4Ô∏è‚É£ Login Guide (Get Tokens)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Login successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains tokens', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('access');",
                  "    pm.expect(response).to.have.property('refresh');",
                  "    ",
                  "    // Save guide tokens",
                  "    pm.environment.set('guide_access_token', response.access);",
                  "    pm.environment.set('guide_refresh_token', response.refresh);",
                  "    pm.environment.set('access_token', response.access);",
                  "    pm.environment.set('refresh_token', response.refresh);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{guide_username}}\",\n  \"password\": \"SecurePass123!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/login/",
              "host": ["{{base_url}}"],
              "path": ["v1", "auth", "login", ""]
            }
          }
        },
        {
          "name": "4Ô∏è‚É£ Get Current User Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('User profile retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Profile contains user data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('username');",
                  "    pm.expect(response).to.have.property('email');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/auth/me/",
              "host": ["{{base_url}}"],
              "path": ["v1", "auth", "me", ""]
            }
          }
        },
        {
          "name": "5Ô∏è‚É£ Update Current User Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('User profile updated successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Profile contains updated data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('first_name');",
                  "    pm.expect(response).to.have.property('last_name');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Updated First\",\n  \"last_name\": \"Updated Last\",\n  \"phone_number\": \"+213555987654\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/me/",
              "host": ["{{base_url}}"],
              "path": ["v1", "auth", "me", ""]
            }
          }
        }
      ]
    },
    {
      "name": "üó∫Ô∏è Locations & Wilayas",
      "item": [
        {
          "name": "List All Wilayas",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Wilayas list retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains wilayas array', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "    if (response.length > 0) {",
                  "        pm.environment.set('wilaya_id', response[0].id);",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/wilayas/",
              "host": ["{{base_url}}"],
              "path": ["v1", "wilayas", ""]
            }
          }
        },
        {
          "name": "Get Wilaya Details",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Wilaya details retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains wilaya data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('name_en');",
                  "    pm.expect(response).to.have.property('code');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/wilayas/{{wilaya_id}}/",
              "host": ["{{base_url}}"],
              "path": ["v1", "wilayas", "{{wilaya_id}}", ""]
            }
          }
        },
        {
          "name": "Get Guides in Wilaya",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guides in wilaya retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains guides list', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/wilayas/{{wilaya_id}}/guides/",
              "host": ["{{base_url}}"],
              "path": ["v1", "wilayas", "{{wilaya_id}}", "guides", ""]
            }
          }
        },
        {
          "name": "Get Tours in Wilaya",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tours in wilaya retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains tours list', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/wilayas/{{wilaya_id}}/tours/",
              "host": ["{{base_url}}"],
              "path": ["v1", "wilayas", "{{wilaya_id}}", "tours", ""]
            }
          }
        }
      ]
    },
    {
      "name": "üë§ Profile Management",
      "item": [
        {
          "name": "Get My Tourist Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tourist profile retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Profile contains tourist data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('user');",
                  "    pm.expect(response).to.have.property('preferences');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/profiles/tourists/me/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "tourists", "me", ""]
            }
          }
        },
        {
          "name": "Update My Tourist Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tourist profile updated successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Updated profile contains new data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.preferences).to.include('Cultural Tours');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"preferences\": [\"Cultural Tours\", \"Historical Sites\", \"Adventure Tours\"],\n  \"budget_range\": \"medium\",\n  \"travel_style\": \"group\",\n  \"accessibility_needs\": \"none\",\n  \"emergency_contact_name\": \"Ahmed Benali\",\n  \"emergency_contact_phone\": \"+213555987654\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/profiles/tourists/me/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "tourists", "me", ""]
            }
          }
        },
        {
          "name": "List All Guides",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guides list retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", ""]
            }
          }
        },
        {
          "name": "Get My Guide Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guide profile retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Profile contains guide data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('user');",
                  "    pm.expect(response).to.have.property('bio');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/me/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", "me", ""]
            }
          }
        },
        {
          "name": "Update My Guide Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guide profile updated successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Updated profile contains new data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.bio).to.include('Experienced tour guide');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bio\": \"Experienced tour guide specializing in Algerian history and culture. I have been guiding tourists through the beautiful landscapes and rich heritage of Algeria for over 5 years. Fluent in Arabic, French, and English.\",\n  \"years_of_experience\": 5,\n  \"languages\": [\"Arabic\", \"French\", \"English\"],\n  \"coverage_area_ids\": [1],\n  \"half_day_price\": \"5000.00\",\n  \"full_day_price\": \"10000.00\",\n  \"extra_hour_price\": \"1500.00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/me/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", "me", ""]
            }
          }
        },
        {
          "name": "Get Guide Pricing Structure",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guide pricing retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Pricing contains guide rates', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('half_day_price');",
                  "    pm.expect(response).to.have.property('full_day_price');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/{{guide_id}}/pricing/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", "{{guide_id}}", "pricing", ""]
            }
          }
        },
        {
          "name": "Add Guide Certification",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Certification created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains certification data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('name');",
                  "    pm.environment.set('certification_id', response.id);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Professional Tour Guide License\",\n  \"issuing_organization\": \"Ministry of Tourism - Algeria\",\n  \"issue_date\": \"2020-06-15\",\n  \"expiry_date\": \"2025-06-15\",\n  \"description\": \"Official license to operate as a professional tour guide in Algeria\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/certifications/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", "certifications", ""]
            }
          }
        },
        {
          "name": "List My Certifications",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Certifications list retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is an array', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.results).to.be.an('array');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/certifications/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", "certifications", ""]
            }
          }
        },
        {
          "name": "Get Certification Details",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Certification details retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Certification contains details', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('name');",
                  "    pm.expect(response).to.have.property('issuing_organization');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/certifications/{{certification_id}}/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", "certifications", "{{certification_id}}", ""]
            }
          }
        },
        {
          "name": "Update Certification",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Certification updated successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Updated certification contains new data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.description).to.include('Updated');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Professional Tour Guide License\",\n  \"issuing_organization\": \"Ministry of Tourism - Algeria\",\n  \"issue_date\": \"2020-06-15\",\n  \"expiry_date\": \"2025-06-15\",\n  \"description\": \"Updated: Official license to operate as a professional tour guide in Algeria with additional specializations\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/certifications/{{certification_id}}/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", "certifications", "{{certification_id}}", ""]
            }
          }
        },
        {
          "name": "Delete Certification",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Certification deleted successfully', function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/certifications/{{certification_id}}/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", "certifications", "{{certification_id}}", ""]
            }
          }
        },
        {
          "name": "Get Specific Guide Details",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guide details retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Guide contains public profile data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('user');",
                  "    pm.expect(response).to.have.property('bio');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/profiles/guides/{{guide_id}}/",
              "host": ["{{base_url}}"],
              "path": ["v1", "profiles", "guides", "{{guide_id}}", ""]
            }
          }
        }
      ]
    },
    {
      "name": "üèõÔ∏è Tours Management",
      "item": [
        {
          "name": "List All Tours",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tours list retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/tours/",
              "host": ["{{base_url}}"],
              "path": ["v1", "tours", ""]
            }
          }
        },
        {
          "name": "Create New Tour",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tour created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains tour data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('title');",
                  "    pm.environment.set('tour_id', response.id);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Historic Casbah of Algiers Walking Tour\",\n  \"description\": \"Explore the UNESCO World Heritage site of the Casbah, with its narrow winding streets, Ottoman palaces, traditional houses, and stunning views of the Mediterranean Sea. Discover the rich history spanning over a millennium.\",\n  \"wilaya\": 1,\n  \"duration_hours\": 4.0,\n  \"max_group_size\": 8,\n  \"included_services\": [\"Professional guide\", \"Historical commentary\", \"Photo stops\", \"Traditional tea break\", \"Map and brochure\"],\n  \"excluded_services\": [\"Transportation to meeting point\", \"Meals\", \"Museum entries\", \"Personal expenses\"],\n  \"meeting_point\": \"Place des Martyrs, Algiers City Center\",\n  \"latitude\": 36.7763,\n  \"longitude\": 3.0586,\n  \"tags\": [\"history\", \"culture\", \"walking\", \"UNESCO\", \"architecture\", \"Ottoman\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/tours/",
              "host": ["{{base_url}}"],
              "path": ["v1", "tours", ""]
            }
          }
        },
        {
          "name": "Get Tour Details",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tour details retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains complete tour data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('title');",
                  "    pm.expect(response).to.have.property('guide');",
                  "    pm.expect(response).to.have.property('wilaya');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/tours/{{tour_id}}/",
              "host": ["{{base_url}}"],
              "path": ["v1", "tours", "{{tour_id}}", ""]
            }
          }
        },
        {
          "name": "Get My Tours (Guide)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('My tours retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains tours array', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/tours/me/",
              "host": ["{{base_url}}"],
              "path": ["v1", "tours", "me", ""]
            }
          }
        },
        {
          "name": "Search Tours",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tour search successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains search results', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/tours/search/?q=casbah",
              "host": ["{{base_url}}"],
              "path": ["v1", "tours", "search", ""],
              "query": [
                {
                  "key": "q",
                  "value": "casbah"
                }
              ]
            }
          }
        },
        {
          "name": "Advanced Tour Search",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Advanced tour search successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains filtered results', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/tours/search/?q=casbah&min_price=50&max_price=200&wilaya=1",
              "host": ["{{base_url}}"],
              "path": ["v1", "tours", "search", ""],
              "query": [
                {
                  "key": "q",
                  "value": "casbah"
                },
                {
                  "key": "min_price",
                  "value": "50"
                },
                {
                  "key": "max_price",
                  "value": "200"
                },
                {
                  "key": "wilaya",
                  "value": "1"
                }
              ]
            }
          }
        },
        {
          "name": "Calculate Tour Price with Group Size",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tour price calculation successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains calculated pricing', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('total_price');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/tours/{{tour_id}}/calculate-price/?group_size=8",
              "host": ["{{base_url}}"],
              "path": ["v1", "tours", "{{tour_id}}", "calculate-price", ""],
              "query": [
                {
                  "key": "group_size",
                  "value": "8"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üìÖ Bookings Management",
      "item": [
        {
          "name": "Create Booking Request",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Booking created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains booking data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.environment.set('booking_id', response.id);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tour\": {{tour_id}},\n  \"booking_date\": \"2024-12-15\",\n  \"time_slot\": \"morning\",\n  \"group_size\": 4,\n  \"notes\": \"We are particularly interested in the Ottoman architecture and would love to visit some traditional craft workshops if possible.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/bookings/",
              "host": ["{{base_url}}"],
              "path": ["v1", "bookings", ""]
            }
          }
        },
        {
          "name": "List My Bookings",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Bookings list retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/bookings/",
              "host": ["{{base_url}}"],
              "path": ["v1", "bookings", ""]
            }
          }
        },
        {
          "name": "Get Booking Details",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Booking details retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains booking details', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('tour');",
                  "    pm.expect(response).to.have.property('booking_date');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/bookings/{{booking_id}}/",
              "host": ["{{base_url}}"],
              "path": ["v1", "bookings", "{{booking_id}}", ""]
            }
          }
        },
        {
          "name": "Tourist Upcoming Bookings",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tourist upcoming bookings retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains upcoming bookings', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/bookings/tourist/upcoming/",
              "host": ["{{base_url}}"],
              "path": ["v1", "bookings", "tourist", "upcoming", ""]
            }
          }
        },
        {
          "name": "Guide Pending Bookings",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guide pending bookings retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains pending bookings', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/bookings/guide/pending/",
              "host": ["{{base_url}}"],
              "path": ["v1", "bookings", "guide", "pending", ""]
            }
          }
        },
        {
          "name": "Update Booking Status (Approve)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Booking status updated successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains updated status', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.status).to.eql('confirmed');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"confirmed\",\n  \"guide_notes\": \"Booking confirmed! Looking forward to showing you the beautiful Casbah. Please wear comfortable walking shoes.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/bookings/{{booking_id}}/status/",
              "host": ["{{base_url}}"],
              "path": ["v1", "bookings", "{{booking_id}}", "status", ""]
            }
          }
        },
        {
          "name": "Get Booking Invoice",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Booking invoice retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains invoice details', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('total_amount');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/bookings/{{booking_id}}/invoice/",
              "host": ["{{base_url}}"],
              "path": ["v1", "bookings", "{{booking_id}}", "invoice", ""]
            }
          }
        },
        {
          "name": "Cancel Booking",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Booking cancelled successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains cancellation status', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.status).to.eql('cancelled');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cancellation_reason\": \"Change of travel plans due to unexpected circumstances\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/bookings/{{booking_id}}/cancel/",
              "host": ["{{base_url}}"],
              "path": ["v1", "bookings", "{{booking_id}}", "cancel", ""]
            }
          }
        },
        {
          "name": "Guide Availability Calendar",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guide availability calendar retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains availability data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/bookings/calendar/available/",
              "host": ["{{base_url}}"],
              "path": ["v1", "bookings", "calendar", "available", ""]
            }
          }
        }
      ]
    },
    {
      "name": "‚≠ê Reviews Management",
      "item": [
        {
          "name": "Create Review for Booking",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Review created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains review data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('rating');",
                  "    pm.environment.set('review_id', response.id);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 5,\n  \"title\": \"Amazing experience in the Casbah!\",\n  \"comment\": \"Ahmed was incredibly knowledgeable about the history and showed us hidden gems. Highly recommend this tour for anyone visiting Algiers!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/reviews/bookings/{{booking_id}}/review/",
              "host": ["{{base_url}}"],
              "path": ["v1", "reviews", "bookings", "{{booking_id}}", "review", ""]
            }
          }
        },
        {
          "name": "Get Tour Reviews",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Tour reviews retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/reviews/tours/{{tour_id}}/reviews/",
              "host": ["{{base_url}}"],
              "path": ["v1", "reviews", "tours", "{{tour_id}}", "reviews", ""]
            }
          }
        },
        {
          "name": "Get Guide Reviews",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guide reviews retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/reviews/guides/{{guide_id}}/reviews/",
              "host": ["{{base_url}}"],
              "path": ["v1", "reviews", "guides", "{{guide_id}}", "reviews", ""]
            }
          }
        },
        {
          "name": "Create Review for Completed Booking",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Review created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains review data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('rating');",
                  "    pm.environment.set('review_id', response.id);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 5,\n  \"title\": \"Absolutely Amazing Experience!\",\n  \"content\": \"Ahmed was an exceptional guide! His knowledge of Algerian history and culture is incredible. The tour of the Casbah was perfectly organized and we learned so much. Highly recommend to anyone visiting Algeria!\",\n  \"would_recommend\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/reviews/bookings/{{booking_id}}/review/",
              "host": ["{{base_url}}"],
              "path": ["v1", "reviews", "bookings", "{{booking_id}}", "review", ""]
            }
          }
        }
      ]
    },
    {
      "name": "üí¨ Messaging System",
      "item": [
        {
          "name": "Create Conversation",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Conversation created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains conversation data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.environment.set('conversation_id', response.id);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"guide_id\": {{guide_id}}\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/messaging/conversations/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "conversations", ""]
            }
          }
        },
        {
          "name": "Send Message",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Message sent successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains message data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('content');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Hello! I'm interested in booking your Casbah tour. Do you have availability for next weekend?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/messaging/conversations/{{conversation_id}}/send_message/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "conversations", "{{conversation_id}}", "send_message", ""]
            }
          }
        },
        {
          "name": "List My Conversations",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Conversations retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/messaging/conversations/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "conversations", ""]
            }
          }
        },
        {
          "name": "Get Messages in Conversation",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Messages retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains messages array', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/messaging/conversations/{{conversation_id}}/messages/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "conversations", "{{conversation_id}}", "messages", ""]
            }
          }
        },
        {
          "name": "Mark Messages as Read",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Messages marked as read successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains status message', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('status');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/messaging/conversations/{{conversation_id}}/mark_read/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "conversations", "{{conversation_id}}", "mark_read", ""]
            }
          }
        },
        {
          "name": "Create Custom Tour Request",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Custom tour request created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response contains request data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.environment.set('custom_request_id', response.id);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"guide\": {{guide_id}},\n  \"title\": \"Custom Archaeological Tour of Roman Sites\",\n  \"description\": \"I'm very interested in Roman history and would love a specialized tour focusing on Roman ruins and archaeological sites around Algeria. I'm particularly interested in Timgad and Djemila if possible.\",\n  \"preferred_date\": \"2024-12-20\",\n  \"duration_hours\": 8,\n  \"group_size\": 2,\n  \"budget_range\": \"200-300\",\n  \"special_requirements\": \"Need transportation from Algiers. Prefer English-speaking guide with archaeological background.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/messaging/custom-requests/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "custom-requests", ""]
            }
          }
        },
        {
          "name": "List Custom Tour Requests",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Custom tour requests retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/messaging/custom-requests/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "custom-requests", ""]
            }
          }
        },
        {
          "name": "Get Custom Tour Request Details",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Custom tour request details retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains request details', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('title');",
                  "    pm.expect(response).to.have.property('status');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/messaging/custom-requests/{{custom_request_id}}/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "custom-requests", "{{custom_request_id}}", ""]
            }
          }
        },
        {
          "name": "Update Custom Tour Request",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Custom tour request updated successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains updated data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.description).to.include('Updated');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated: Custom Archaeological Tour of Roman Sites\",\n  \"description\": \"Updated: I'm very interested in Roman history and would love a specialized tour focusing on Roman ruins and archaeological sites around Algeria. I'm particularly interested in Timgad, Djemila, and also Hippo Regius if possible.\",\n  \"preferred_date\": \"2024-12-22\",\n  \"duration_hours\": 10,\n  \"group_size\": 3,\n  \"budget_range\": \"250-350\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/messaging/custom-requests/{{custom_request_id}}/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "custom-requests", "{{custom_request_id}}", ""]
            }
          }
        },
        {
          "name": "Guide Respond to Custom Tour Request (Accept)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Guide response submitted successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response shows accepted status', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.status).to.eql('accepted');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"accept\",\n  \"proposed_price\": \"280.00\",\n  \"alternative_date\": \"2024-12-21\",\n  \"guide_response\": \"I'd be delighted to create this custom archaeological tour for you! I specialize in Roman history and have extensive knowledge of Timgad and Djemila. I can arrange transportation from Algiers and provide detailed historical context throughout the journey.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/messaging/custom-requests/{{custom_request_id}}/respond/",
              "host": ["{{base_url}}"],
              "path": ["v1", "messaging", "custom-requests", "{{custom_request_id}}", "respond", ""]
            }
          }
        }
      ]
    },
    {
      "name": "üîÑ Token Management",
      "item": [
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Token refreshed successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('New access token received', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('access');",
                  "    pm.environment.set('access_token', response.access);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/refresh/",
              "host": ["{{base_url}}"],
              "path": ["v1", "auth", "refresh", ""]
            }
          }
        },
        {
          "name": "Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Logout successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Clear tokens after logout",
                  "pm.environment.unset('access_token');",
                  "pm.environment.unset('refresh_token');"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/logout/",
              "host": ["{{base_url}}"],
              "path": ["v1", "auth", "logout", ""]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global pre-request script",
          "console.log('üöÄ Running DZ-TourGuide API request...');"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has correct content-type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});"
        ]
      }
    }
  ]
}
